{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport axios from '@/axios';\nexport default {\n  data() {\n    return {\n      orderNumber: \"\",\n      senderCode: \"\",\n      receiverCode: \"\",\n      weight: \"\",\n      length: \"\",\n      width: \"\",\n      height: \"\",\n      minPriceText: \"\",\n      errors: {}\n    };\n  },\n  methods: {\n    validateInput() {\n      const errors = {};\n      if (!this.senderCode) errors.senderCode = 'The Sender Zip Code is required!';\n      if (!this.receiverCode) errors.receiverCode = 'The Receiver Zip Code is required!';\n      if (!this.weight) errors.weight = 'The Weight is required!';\n      if (!this.length) errors.length = 'The Length is required!';\n      if (!this.width) errors.width = 'The Width is required!';\n      if (!this.height) errors.height = 'The Height is required!';\n      return errors;\n    },\n    async getMinPrice() {\n      const response = await axios.post(\"/get-prices\", {\n        WEIGHT: this.weight\n      });\n      console.log(response.data);\n      this.minPriceText = ' From $ ' + response.data[0].PRICE;\n    },\n    async addShipment() {\n      const errors = this.validateInput();\n      const currentDate = new Date().setDate(new Date().getMinutes());\n      var userID = null;\n      if (Object.keys(errors).length > 0) {\n        this.errors = errors;\n        return;\n      }\n      try {\n        if (localStorage.getItem('token')) {\n          if (currentDate > localStorage.getItem('tokenExpireAt')) {\n            localStorage.removeItem('token');\n            localStorage.removeItem('tokenExpireAt');\n            this.$router.push('/login');\n          } else {\n            const user = await axios.get(\"http://localhost:8000/api/user\", {\n              headers: {\n                'Authorization': `Bearer ${localStorage.getItem('token')}`\n              }\n            });\n            userID = user.data.id;\n            // console.log(\"userID\", userID);\n          }\n        }\n        const response = await axios.post(\"/insert-shipment\", {\n          ORDER_NUMBER: Math.floor(Math.random() * (9999999999 - 1000000000 + 1)) + 1000000000,\n          SENDER_CODE: this.senderCode,\n          RECEIVER_CODE: this.receiverCode,\n          DETAILS: JSON.stringify({\n            weight: this.weight,\n            length: this.length,\n            width: this.width,\n            height: this.height,\n            volume: this.length * this.width * this.height / 5000\n          }),\n          ID_USER: userID\n        });\n        if (userID) {\n          // const payload = { ID_USER: userID };\n          // const headers = { 'Authorization': `Bearer ${localStorage.getItem('token')}` };\n          // const userShipments = await axios.post(\"/shipments-by-user\", payload, { headers });\n          // console.log(userShipments);\n          this.$router.push({\n            name: 'myShipments',\n            params: {\n              userID: userID\n            }\n          });\n        } else this.$router.push('/');\n      } catch (error) {\n        console.error(\"An error occurred during the insert shipment: \", error);\n      }\n    }\n  }\n};","map":{"version":3,"names":["axios","data","orderNumber","senderCode","receiverCode","weight","length","width","height","minPriceText","errors","methods","validateInput","getMinPrice","response","post","WEIGHT","console","log","PRICE","addShipment","currentDate","Date","setDate","getMinutes","userID","Object","keys","localStorage","getItem","removeItem","$router","push","user","get","headers","id","ORDER_NUMBER","Math","floor","random","SENDER_CODE","RECEIVER_CODE","DETAILS","JSON","stringify","volume","ID_USER","name","params","error"],"sources":["/Applications/MAMP/htdocs/laravel/arsil-11/frontend/src/components/AddShipment.vue"],"sourcesContent":["<template>\n    <h1>Add Shipment</h1>\n    <div class=\"form-container\">\n        <form @submit.prevent=\"getMinPrice\" class=\"add-shipment-form\">\n            <input class=\"input-field\" type=\"text\" v-model=\"senderCode\" placeholder=\"Sender Zip Code\" required />\n            <p v-if=\"errors.senderCode\" class=\"errors\">{{ errors.senderCode }}</p>\n            <input class=\"input-field\" type=\"text\" v-model=\"receiverCode\" placeholder=\"Receiver Zip Code\" required />\n            <p v-if=\"errors.receiverCode\" class=\"errors\">{{ errors.receiverCode }}</p>\n            <input class=\"input-field\" type=\"number\" v-model=\"weight\" placeholder=\"Weight in kg\" required />\n            <p v-if=\"errors.weight\" class=\"errors\">{{ errors.weight }}</p>\n            <input class=\"input-field\" type=\"number\" v-model=\"length\" placeholder=\"Length in cm\" required />\n            <p v-if=\"errors.length\" class=\"errors\">{{ errors.length }}</p>\n            <input class=\"input-field\" type=\"number\" v-model=\"width\" placeholder=\"Width in cm\" required />\n            <p v-if=\"errors.width\" class=\"errors\">{{ errors.width }}</p>\n            <input class=\"input-field\" type=\"number\" v-model=\"height\" placeholder=\"Height in cm\" required />\n            <p v-if=\"errors.height\" class=\"errors\">{{ errors.height }}</p>\n            <button type=\"submit\">Ship{{ minPriceText }}</button>\n        </form>\n    </div>\n</template>\n\n<script>\nimport axios from '@/axios';\n\nexport default {\n    data() {\n        return {\n            orderNumber: \"\",\n            senderCode: \"\",\n            receiverCode: \"\",\n            weight: \"\",\n            length: \"\",\n            width: \"\",\n            height: \"\",\n            minPriceText: \"\",\n            errors: {}\n        }\n    },\n    methods: {\n        validateInput() {\n            const errors = {};\n            if(!this.senderCode) errors.senderCode = 'The Sender Zip Code is required!';\n            if(!this.receiverCode) errors.receiverCode = 'The Receiver Zip Code is required!';\n            if(!this.weight) errors.weight = 'The Weight is required!';\n            if(!this.length) errors.length = 'The Length is required!';\n            if(!this.width) errors.width = 'The Width is required!';\n            if(!this.height) errors.height = 'The Height is required!';\n            return errors;\n        },\n        async getMinPrice() {\n            const response = await axios.post(\"/get-prices\", {\n                WEIGHT: this.weight\n            });\n            console.log(response.data);\n            this.minPriceText = ' From $ '+response.data[0].PRICE;\n        },\n        async addShipment() {\n            const errors = this.validateInput();\n            const currentDate = new Date().setDate(new Date().getMinutes());\n            var userID = null;\n            if(Object.keys(errors).length > 0) {\n                this.errors = errors;\n                return;\n            }\n            try {\n                if(localStorage.getItem('token')) {\n                    if(currentDate > localStorage.getItem('tokenExpireAt')) {\n                        localStorage.removeItem('token');\n                        localStorage.removeItem('tokenExpireAt');\n                        this.$router.push('/login');\n                    }\n                    else {\n                        const user = await axios.get(\"http://localhost:8000/api/user\", {\n                            headers: {\n                                'Authorization': `Bearer ${localStorage.getItem('token')}`\n                            }\n                        });\n                        userID = user.data.id;\n                        // console.log(\"userID\", userID);\n                    }\n                }\n                const response = await axios.post(\"/insert-shipment\", {\n                    ORDER_NUMBER : Math.floor(Math.random() * (9999999999 - 1000000000 + 1) ) + 1000000000,\n                    SENDER_CODE: this.senderCode,\n                    RECEIVER_CODE: this.receiverCode,\n                    DETAILS: JSON.stringify({\n                        weight: this.weight,\n                        length: this.length,\n                        width: this.width,\n                        height: this.height,\n                        volume: (this.length * this.width * this.height) / 5000\n                    }),\n                    ID_USER: userID\n                });\n                if(userID) {\n                    // const payload = { ID_USER: userID };\n                    // const headers = { 'Authorization': `Bearer ${localStorage.getItem('token')}` };\n                    // const userShipments = await axios.post(\"/shipments-by-user\", payload, { headers });\n                    // console.log(userShipments);\n                    this.$router.push({name: 'myShipments', params: { userID: userID }});\n                    \n                }\n                else \n                    this.$router.push('/');\n            }\n            catch(error) {\n                console.error(\"An error occurred during the insert shipment: \", error);\n            }\n        }\n    }\n}\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}