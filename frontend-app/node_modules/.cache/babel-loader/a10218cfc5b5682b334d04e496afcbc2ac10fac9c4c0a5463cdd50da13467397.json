{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, withModifiers as _withModifiers, Fragment as _Fragment } from \"vue\";\nconst _hoisted_1 = {\n  key: 0\n};\nconst _hoisted_2 = {\n  class: \"form-container\"\n};\nconst _hoisted_3 = {\n  key: 0,\n  class: \"errors\"\n};\nconst _hoisted_4 = {\n  key: 1,\n  class: \"errors\"\n};\nconst _hoisted_5 = {\n  key: 2,\n  class: \"errors\"\n};\nconst _hoisted_6 = {\n  key: 3,\n  class: \"errors\"\n};\nconst _hoisted_7 = {\n  key: 4,\n  class: \"errors\"\n};\nconst _hoisted_8 = {\n  key: 5,\n  class: \"errors\"\n};\nconst _hoisted_9 = {\n  type: \"submit\"\n};\nconst _hoisted_10 = {\n  key: 1\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(_Fragment, null, [_cache[8] || (_cache[8] = _createElementVNode(\"h1\", null, \"Add Shipment\", -1 /* HOISTED */)), !$data.courierSelected ? (_openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"form\", {\n    onSubmit: _cache[6] || (_cache[6] = _withModifiers((...args) => $options.getMinPrice && $options.getMinPrice(...args), [\"prevent\"])),\n    class: \"add-shipment-form\"\n  }, [_withDirectives(_createElementVNode(\"input\", {\n    class: \"input-field\",\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.senderCode = $event),\n    placeholder: \"Sender Zip Code\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.senderCode]]), $data.errors.senderCode ? (_openBlock(), _createElementBlock(\"p\", _hoisted_3, _toDisplayString($data.errors.senderCode), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _withDirectives(_createElementVNode(\"input\", {\n    class: \"input-field\",\n    type: \"text\",\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.receiverCode = $event),\n    placeholder: \"Receiver Zip Code\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.receiverCode]]), $data.errors.receiverCode ? (_openBlock(), _createElementBlock(\"p\", _hoisted_4, _toDisplayString($data.errors.receiverCode), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _withDirectives(_createElementVNode(\"input\", {\n    class: \"input-field\",\n    type: \"number\",\n    \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.weight = $event),\n    placeholder: \"Weight in kg\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.weight]]), $data.errors.weight ? (_openBlock(), _createElementBlock(\"p\", _hoisted_5, _toDisplayString($data.errors.weight), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _withDirectives(_createElementVNode(\"input\", {\n    class: \"input-field\",\n    type: \"number\",\n    \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.length = $event),\n    placeholder: \"Length in cm\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.length]]), $data.errors.length ? (_openBlock(), _createElementBlock(\"p\", _hoisted_6, _toDisplayString($data.errors.length), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _withDirectives(_createElementVNode(\"input\", {\n    class: \"input-field\",\n    type: \"number\",\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $data.width = $event),\n    placeholder: \"Width in cm\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.width]]), $data.errors.width ? (_openBlock(), _createElementBlock(\"p\", _hoisted_7, _toDisplayString($data.errors.width), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _withDirectives(_createElementVNode(\"input\", {\n    class: \"input-field\",\n    type: \"number\",\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $data.height = $event),\n    placeholder: \"Height in cm\",\n    required: \"\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $data.height]]), $data.errors.height ? (_openBlock(), _createElementBlock(\"p\", _hoisted_8, _toDisplayString($data.errors.height), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"button\", _hoisted_9, \"Ship\" + _toDisplayString($data.minPriceText), 1 /* TEXT */)], 32 /* NEED_HYDRATION */)])])) : _createCommentVNode(\"v-if\", true), $data.courierSelected ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, _cache[7] || (_cache[7] = [_createElementVNode(\"p\", null, \"List Couriers\", -1 /* HOISTED */)]))) : _createCommentVNode(\"v-if\", true)], 64 /* STABLE_FRAGMENT */);\n}","map":{"version":3,"names":["key","class","type","_createElementBlock","_Fragment","_createElementVNode","$data","courierSelected","_hoisted_1","_hoisted_2","onSubmit","_cache","_withModifiers","args","$options","getMinPrice","$event","senderCode","placeholder","required","errors","_hoisted_3","_toDisplayString","_createCommentVNode","receiverCode","_hoisted_4","weight","_hoisted_5","length","_hoisted_6","width","_hoisted_7","height","_hoisted_8","_hoisted_9","minPriceText","_hoisted_10"],"sources":["/Applications/MAMP/htdocs/laravel/arsil-11/frontend/src/components/AddShipment.vue"],"sourcesContent":["<template>\n    <h1>Add Shipment</h1>\n    <div v-if=\"!courierSelected\">\n        <div class=\"form-container\">\n            <form @submit.prevent=\"getMinPrice\" class=\"add-shipment-form\">\n                <input class=\"input-field\" type=\"text\" v-model=\"senderCode\" placeholder=\"Sender Zip Code\" required />\n                <p v-if=\"errors.senderCode\" class=\"errors\">{{ errors.senderCode }}</p>\n                <input class=\"input-field\" type=\"text\" v-model=\"receiverCode\" placeholder=\"Receiver Zip Code\" required />\n                <p v-if=\"errors.receiverCode\" class=\"errors\">{{ errors.receiverCode }}</p>\n                <input class=\"input-field\" type=\"number\" v-model=\"weight\" placeholder=\"Weight in kg\" required />\n                <p v-if=\"errors.weight\" class=\"errors\">{{ errors.weight }}</p>\n                <input class=\"input-field\" type=\"number\" v-model=\"length\" placeholder=\"Length in cm\" required />\n                <p v-if=\"errors.length\" class=\"errors\">{{ errors.length }}</p>\n                <input class=\"input-field\" type=\"number\" v-model=\"width\" placeholder=\"Width in cm\" required />\n                <p v-if=\"errors.width\" class=\"errors\">{{ errors.width }}</p>\n                <input class=\"input-field\" type=\"number\" v-model=\"height\" placeholder=\"Height in cm\" required />\n                <p v-if=\"errors.height\" class=\"errors\">{{ errors.height }}</p>\n                <button type=\"submit\">Ship{{ minPriceText }}</button>\n            </form>\n        </div>\n    </div>\n    <div v-if=\"courierSelected\">\n        <p>List Couriers</p>\n    </div>\n</template>\n\n<script>\nimport axios from '@/axios';\n\nexport default {\n    data() {\n        return {\n            orderNumber: \"\",\n            senderCode: \"\",\n            receiverCode: \"\",\n            weight: \"\",\n            length: \"\",\n            width: \"\",\n            height: \"\",\n            minPrice: 0,\n            minPriceText: \"\",\n            courierSelected: false,\n            errors: {}\n        }\n    },\n    methods: {\n        validateInput() {\n            const errors = {};\n            if(!this.senderCode) errors.senderCode = 'The Sender Zip Code is required!';\n            if(!this.receiverCode) errors.receiverCode = 'The Receiver Zip Code is required!';\n            if(!this.weight) errors.weight = 'The Weight is required!';\n            if(!this.length) errors.length = 'The Length is required!';\n            if(!this.width) errors.width = 'The Width is required!';\n            if(!this.height) errors.height = 'The Height is required!';\n            return errors;\n        },\n        async getMinPrice() {\n            if(this.minPrice == 0) {\n                const response = await axios.post(\"/get-prices\", {\n                    WEIGHT: this.weight\n                });\n                console.log(response.data);\n                this.minPriceText = ' From $ '+response.data[0].PRICE;\n                this.minPrice = response.data[0].PRICE;\n            }\n            else {\n                if(this.minPrice > 0 && this.courierSelected) {\n                    // this.addShipment();\n                    console.log(\"go to addShipment\");\n                }\n                else if(this.minPrice > 0) {\n                    this.courierSelected = true;\n                    // this.listCouriers();\n                    console.log(\"go to listCouriers\");\n                }\n            }\n        },\n        async addShipment() {\n            const errors = this.validateInput();\n            const currentDate = new Date().setDate(new Date().getMinutes());\n            var userID = null;\n            if(Object.keys(errors).length > 0) {\n                this.errors = errors;\n                return;\n            }\n            try {\n                if(localStorage.getItem('token')) {\n                    if(currentDate > localStorage.getItem('tokenExpireAt')) {\n                        localStorage.removeItem('token');\n                        localStorage.removeItem('tokenExpireAt');\n                        this.$router.push('/login');\n                    }\n                    else {\n                        const user = await axios.get(\"http://localhost:8000/api/user\", {\n                            headers: {\n                                'Authorization': `Bearer ${localStorage.getItem('token')}`\n                            }\n                        });\n                        userID = user.data.id;\n                        // console.log(\"userID\", userID);\n                    }\n                }\n                const response = await axios.post(\"/insert-shipment\", {\n                    ORDER_NUMBER : Math.floor(Math.random() * (9999999999 - 1000000000 + 1) ) + 1000000000,\n                    SENDER_CODE: this.senderCode,\n                    RECEIVER_CODE: this.receiverCode,\n                    DETAILS: JSON.stringify({\n                        weight: this.weight,\n                        length: this.length,\n                        width: this.width,\n                        height: this.height,\n                        volume: (this.length * this.width * this.height) / 5000\n                    }),\n                    ID_USER: userID\n                });\n                if(userID) {\n                    // const payload = { ID_USER: userID };\n                    // const headers = { 'Authorization': `Bearer ${localStorage.getItem('token')}` };\n                    // const userShipments = await axios.post(\"/shipments-by-user\", payload, { headers });\n                    // console.log(userShipments);\n                    this.$router.push({name: 'myShipments', params: { userID: userID }});\n                    \n                }\n                else \n                    this.$router.push('/');\n            }\n            catch(error) {\n                console.error(\"An error occurred during the insert shipment: \", error);\n            }\n        }\n    }\n}\n</script>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}