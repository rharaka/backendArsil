{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { createStore } from 'vuex';\nimport router from './router';\nimport axios from '@/axios';\nexport default createStore({\n  state: {\n    isLoggedIn: !!localStorage.getItem('token')\n  },\n  mutations: {\n    LOGIN(state) {\n      state.isLoggedIn = true;\n      state.inRegister = false;\n    },\n    LOGOUT(state) {\n      state.isLoggedIn = false;\n      state.inRegister = true;\n    }\n  },\n  actions: {\n    login({\n      commit\n    }) {\n      commit('LOGIN');\n    },\n    async logout({\n      commit,\n      dispatch\n    }) {\n      try {\n        const user = await axios.get(\"/user\", {\n          headers: {\n            'Authorization': `Bearer ${localStorage.getItem('token')}`\n          }\n        });\n        const payload = {\n          user: user\n        };\n        const headers = {\n          'Authorization': `Bearer ${localStorage.getItem('token')}`\n        };\n        const response = await axios.post(\"/logout\", payload, {\n          headers\n        });\n        console.log(response);\n        // if(response.data) \n        //     this.$store.commit('LOGOUT');\n      } catch (error) {\n        console.error(\"An error occurred during the logout: \", error.response.data);\n      }\n      commit('LOGOUT');\n      localStorage.removeItem('token');\n      dispatch('navigateToLogin');\n    },\n    navigateToLogin() {\n      router.push({\n        name: 'Login'\n      });\n    }\n  }\n});","map":{"version":3,"names":["createStore","router","axios","state","isLoggedIn","localStorage","getItem","mutations","LOGIN","inRegister","LOGOUT","actions","login","commit","logout","dispatch","user","get","headers","payload","response","post","console","log","error","data","removeItem","navigateToLogin","push","name"],"sources":["/Applications/MAMP/htdocs/laravel/arsil-11/frontend/src/store.js"],"sourcesContent":["import { createStore } from 'vuex';\nimport router from './router';\nimport axios from '@/axios';\n\nexport default createStore({\n    state: {\n        isLoggedIn: !!localStorage.getItem('token')\n    },\n    mutations: {\n        LOGIN(state) {\n            state.isLoggedIn = true;\n            state.inRegister = false;\n        },\n        LOGOUT(state) {\n            state.isLoggedIn = false;\n            state.inRegister = true;\n        }\n    },\n    actions: {\n        login({ commit }) {\n            commit('LOGIN');\n        },\n        async logout({ commit, dispatch }) {\n            try {\n                const user = await axios.get(\"/user\", {\n                    headers: {\n                        'Authorization': `Bearer ${localStorage.getItem('token')}`\n                    }\n                });\n                const payload = { user: user };\n                const headers = { 'Authorization': `Bearer ${localStorage.getItem('token')}` };\n                const response = await axios.post(\"/logout\", payload, { headers });\n                console.log(response);\n                // if(response.data) \n                //     this.$store.commit('LOGOUT');\n            }\n            catch(error) {\n                console.error(\"An error occurred during the logout: \", error.response.data);\n            }\n            commit('LOGOUT');\n            localStorage.removeItem('token');\n            dispatch('navigateToLogin');\n        },\n        navigateToLogin(){\n            router.push({name: 'Login'});\n        }\n    }\n});"],"mappings":";AAAA,SAASA,WAAW,QAAQ,MAAM;AAClC,OAAOC,MAAM,MAAM,UAAU;AAC7B,OAAOC,KAAK,MAAM,SAAS;AAE3B,eAAeF,WAAW,CAAC;EACvBG,KAAK,EAAE;IACHC,UAAU,EAAE,CAAC,CAACC,YAAY,CAACC,OAAO,CAAC,OAAO;EAC9C,CAAC;EACDC,SAAS,EAAE;IACPC,KAAKA,CAACL,KAAK,EAAE;MACTA,KAAK,CAACC,UAAU,GAAG,IAAI;MACvBD,KAAK,CAACM,UAAU,GAAG,KAAK;IAC5B,CAAC;IACDC,MAAMA,CAACP,KAAK,EAAE;MACVA,KAAK,CAACC,UAAU,GAAG,KAAK;MACxBD,KAAK,CAACM,UAAU,GAAG,IAAI;IAC3B;EACJ,CAAC;EACDE,OAAO,EAAE;IACLC,KAAKA,CAAC;MAAEC;IAAO,CAAC,EAAE;MACdA,MAAM,CAAC,OAAO,CAAC;IACnB,CAAC;IACD,MAAMC,MAAMA,CAAC;MAAED,MAAM;MAAEE;IAAS,CAAC,EAAE;MAC/B,IAAI;QACA,MAAMC,IAAI,GAAG,MAAMd,KAAK,CAACe,GAAG,CAAC,OAAO,EAAE;UAClCC,OAAO,EAAE;YACL,eAAe,EAAE,UAAUb,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;UAC5D;QACJ,CAAC,CAAC;QACF,MAAMa,OAAO,GAAG;UAAEH,IAAI,EAAEA;QAAK,CAAC;QAC9B,MAAME,OAAO,GAAG;UAAE,eAAe,EAAE,UAAUb,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC;QAAG,CAAC;QAC9E,MAAMc,QAAQ,GAAG,MAAMlB,KAAK,CAACmB,IAAI,CAAC,SAAS,EAAEF,OAAO,EAAE;UAAED;QAAQ,CAAC,CAAC;QAClEI,OAAO,CAACC,GAAG,CAACH,QAAQ,CAAC;QACrB;QACA;MACJ,CAAC,CACD,OAAMI,KAAK,EAAE;QACTF,OAAO,CAACE,KAAK,CAAC,uCAAuC,EAAEA,KAAK,CAACJ,QAAQ,CAACK,IAAI,CAAC;MAC/E;MACAZ,MAAM,CAAC,QAAQ,CAAC;MAChBR,YAAY,CAACqB,UAAU,CAAC,OAAO,CAAC;MAChCX,QAAQ,CAAC,iBAAiB,CAAC;IAC/B,CAAC;IACDY,eAAeA,CAAA,EAAE;MACb1B,MAAM,CAAC2B,IAAI,CAAC;QAACC,IAAI,EAAE;MAAO,CAAC,CAAC;IAChC;EACJ;AACJ,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}